{"version":3,"sources":["./src/app/routes/permissions/permissions-routing.module.ts","./src/app/routes/permissions/test/test.component.ts","./src/app/routes/permissions/test/test.component.html","./src/app/routes/permissions/role-switching/role-switching.component.ts","./src/app/routes/permissions/role-switching/role-switching.component.html","./src/app/routes/permissions/route-guard/route-guard.component.ts","./src/app/routes/permissions/route-guard/route-guard.component.html","./src/app/routes/permissions/permissions.module.ts"],"names":[],"mappings":"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","file":"permissions-permissions-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { PermissionsRoleSwitchingComponent } from './role-switching/role-switching.component';\r\nimport { PermissionsRouteGuardComponent } from './route-guard/route-guard.component';\r\nimport { PermissionsTestComponent } from './test/test.component';\r\nimport { NgxPermissionsGuard } from 'ngx-permissions';\r\n\r\nconst routes: Routes = [\r\n  { path: 'role-switching', component: PermissionsRoleSwitchingComponent },\r\n  {\r\n    path: 'route-guard',\r\n    component: PermissionsRouteGuardComponent,\r\n    canActivate: [NgxPermissionsGuard],\r\n    data: {\r\n      permissions: {\r\n        except: 'GUEST',\r\n        redirectTo: '/dashboard',\r\n      },\r\n    },\r\n  },\r\n  {\r\n    path: 'test',\r\n    component: PermissionsTestComponent,\r\n    canActivate: [NgxPermissionsGuard],\r\n    data: {\r\n      permissions: {\r\n        only: 'ADMIN',\r\n        redirectTo: '/dashboard',\r\n      },\r\n    },\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class PermissionsRoutingModule {}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { NgxPermissionsService } from 'ngx-permissions';\r\n\r\n@Component({\r\n  selector: 'app-permissions-test',\r\n  templateUrl: './test.component.html',\r\n  styleUrls: ['./test.component.scss'],\r\n})\r\nexport class PermissionsTestComponent implements OnInit {\r\n  comparedPermission: string[] = ['guest'];\r\n\r\n  constructor(private permissionsSrv: NgxPermissionsService) {}\r\n\r\n  ngOnInit() {}\r\n\r\n  getPermissions() {\r\n    return Object.keys(this.permissionsSrv.getPermissions());\r\n  }\r\n\r\n  addPermission() {\r\n    // this.permissionsSrv.loadPermissions(['admin']);\r\n    this.permissionsSrv.addPermission('admin', () => {\r\n      // return false;\r\n      return new Promise<boolean>((resolve, reject) => {\r\n        setTimeout(() => resolve(true), 2000);\r\n      });\r\n    });\r\n  }\r\n\r\n  removePermission() {\r\n    this.permissionsSrv.removePermission('admin');\r\n  }\r\n\r\n  unAuthorized() {\r\n    console.log('unAuthorized');\r\n  }\r\n\r\n  authorized() {\r\n    console.log('authorizes');\r\n  }\r\n\r\n  changeToAdmin() {\r\n    this.comparedPermission = ['admin'];\r\n    console.log(this.comparedPermission);\r\n  }\r\n\r\n  changeToAnotherPermission() {\r\n    this.comparedPermission = ['awesome'];\r\n    console.log(this.comparedPermission);\r\n  }\r\n\r\n  changeToGuest() {\r\n    this.comparedPermission = ['guest'];\r\n    console.log(this.comparedPermission);\r\n  }\r\n}\r\n","<page-header></page-header>\r\n\r\n<mtx-alert type=\"danger\">The permissions check will delay 2s.</mtx-alert>\r\n\r\n<p>\r\n  <button (click)=\"addPermission()\">Add Permission [ admin ]</button>\r\n  <button (click)=\"removePermission()\">Remove Permission [ admin ]</button>\r\n</p>\r\n\r\n<ng-template permissions [ngxPermissionsOnly]=\"['admin']\">\r\n  <p class=\"bg-green-500 text-white\">\r\n    I should see it only admin\r\n  </p>\r\n</ng-template>\r\n\r\n<ng-template [ngxPermissionsOnly]=\"['admin']\" [ngxPermissionsExcept]=\"'hhhhh'\">\r\n  <p class=\"bg-green-500 text-white\">\r\n    Usage on both only and except I should see it only admin\r\n  </p>\r\n</ng-template>\r\n\r\n<ng-template permissions [ngxPermissionsOnly]=\"['guest']\">\r\n  <p class=\"bg-purple-500 text-white\">I will see it only guest</p>\r\n</ng-template>\r\n\r\n<ng-template permissions [ngxPermissionsExcept]=\"['adminnnnn']\"\r\n             (permissionsAuthorized)=\"authorized()\"\r\n             (permissionsUnauthorized)=\"unAuthorized()\">\r\n  <p class=\"bg-orange-500 text-white\">I will see it except adminnnnn</p>\r\n</ng-template>\r\n\r\n<ng-template permissions [ngxPermissionsExcept]=\"['admin']\">\r\n  <p class=\"bg-indigo-500 text-white\">I should see it except admin</p>\r\n</ng-template>\r\n\r\n<div *ngxPermissionsOnly=\"['admin']; else a; then b\">\r\n  Testing template\r\n</div>\r\n\r\n<div *ngxPermissionsExcept=\"['admin']; else a; then b\">\r\n  Testing template\r\n</div>\r\n\r\n<ng-template #a>\r\n  <p class=\"bg-gray-900 text-white\">else block</p>\r\n</ng-template>\r\n<ng-template #b>\r\n  <p class=\"bg-gray-300\">then block</p>\r\n</ng-template>\r\n\r\n<p>\r\n  Compared permission: <code>{{comparedPermission | json}}</code>\r\n</p>\r\n\r\n<div>\r\n  <button (click)=\"changeToAdmin()\">Change To Admin Permission</button>\r\n\r\n  <button (click)=\"changeToAnotherPermission()\">Change To Awesome Permission</button>\r\n\r\n  <button (click)=\"changeToGuest()\">Change To Guest Permission</button>\r\n</div>\r\n\r\n<div>\r\n  <button *ngxPermissionsOnly=\"comparedPermission\">\r\n    This should be visible to admin or superadmin\r\n  </button>\r\n\r\n  <button *ngxPermissionsOnly=\"[]\">WTF</button>\r\n</div>\r\n\r\n<p>\r\n  Your current permissions: <code>{{getPermissions() | json}}</code>\r\n</p>\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { NgxRolesService, NgxPermissionsService } from 'ngx-permissions';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-permissions-role-switching',\r\n  templateUrl: './role-switching.component.html',\r\n  styleUrls: ['./role-switching.component.scss'],\r\n})\r\nexport class PermissionsRoleSwitchingComponent implements OnInit, OnDestroy {\r\n  currentRole: string;\r\n\r\n  currentPermissions: string[];\r\n\r\n  permissionsOfRole = {\r\n    ADMIN: ['canAdd', 'canDelete', 'canEdit', 'canRead'],\r\n    MANAGER: ['canAdd', 'canEdit', 'canRead'],\r\n    GUEST: ['canRead'],\r\n  };\r\n\r\n  private readonly _destroy$ = new Subject<void>();\r\n\r\n  constructor(private rolesSrv: NgxRolesService, private permissionsSrv: NgxPermissionsService) {}\r\n\r\n  ngOnInit() {\r\n    this.currentRole = Object.keys(this.rolesSrv.getRoles())[0];\r\n    this.currentPermissions = Object.keys(this.permissionsSrv.getPermissions());\r\n\r\n    this.rolesSrv.roles$.pipe(takeUntil(this._destroy$)).subscribe(roles => {\r\n      console.log(roles);\r\n    });\r\n    this.permissionsSrv.permissions$.pipe(takeUntil(this._destroy$)).subscribe(permissions => {\r\n      console.log(permissions);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this._destroy$.next();\r\n    this._destroy$.complete();\r\n  }\r\n\r\n  onPermissionChange() {\r\n    this.currentPermissions = this.permissionsOfRole[this.currentRole];\r\n    this.rolesSrv.flushRolesAndPermissions();\r\n    this.rolesSrv.addRoleWithPermissions(this.currentRole, this.currentPermissions);\r\n  }\r\n}\r\n","<page-header></page-header>\r\n\r\n<p>\r\n  The permissions management is powered by\r\n  <a href=\"https://github.com/AlexKhymenko/ngx-permissions\" target=\"_blank\">\r\n    <code>ngx-permissions</code>\r\n  </a>.\r\n</p>\r\n\r\n<mat-button-toggle-group [(ngModel)]=\"currentRole\" (change)=\"onPermissionChange()\">\r\n  <mat-button-toggle value=\"ADMIN\">ADMIN</mat-button-toggle>\r\n  <mat-button-toggle value=\"MANAGER\">MANAGER</mat-button-toggle>\r\n  <mat-button-toggle value=\"GUEST\">GUEST</mat-button-toggle>\r\n</mat-button-toggle-group>\r\n\r\n<p>\r\n  Your current role: <code>{{currentRole | json}}</code>\r\n</p>\r\n\r\n<p>\r\n  Your current permissions: <code>{{currentPermissions | json}}</code>\r\n</p>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { NgxRolesService, NgxPermissionsService } from 'ngx-permissions';\r\n\r\n@Component({\r\n  selector: 'app-permissions-route-guard',\r\n  templateUrl: './route-guard.component.html',\r\n  styleUrls: ['./route-guard.component.scss'],\r\n})\r\nexport class PermissionsRouteGuardComponent implements OnInit {\r\n  currentRole: string;\r\n\r\n  currentPermissions: string[];\r\n\r\n  permissionsOfRole = {\r\n    ADMIN: ['canAdd', 'canDelete', 'canEdit', 'canRead'],\r\n    MANAGER: ['canAdd', 'canEdit', 'canRead'],\r\n    GUEST: ['canRead'],\r\n  };\r\n\r\n  constructor(\r\n    private rolesSrv: NgxRolesService,\r\n    private permissionsSrv: NgxPermissionsService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.currentRole = Object.keys(this.rolesSrv.getRoles())[0];\r\n    this.currentPermissions = Object.keys(this.permissionsSrv.getPermissions());\r\n  }\r\n\r\n  onPermissionChange() {\r\n    this.currentPermissions = this.permissionsOfRole[this.currentRole];\r\n    this.rolesSrv.flushRolesAndPermissions();\r\n    this.rolesSrv.addRoleWithPermissions(this.currentRole, this.currentPermissions);\r\n\r\n    this.router.navigateByUrl('/dashboard');\r\n  }\r\n}\r\n","<page-header></page-header>\r\n\r\n<p>\r\n  The route will be redirected to dashboard after change permission.\r\n</p>\r\n\r\n<mat-button-toggle-group [(ngModel)]=\"currentRole\" (change)=\"onPermissionChange()\">\r\n  <mat-button-toggle value=\"ADMIN\">ADMIN</mat-button-toggle>\r\n  <mat-button-toggle value=\"MANAGER\">MANAGER</mat-button-toggle>\r\n  <mat-button-toggle value=\"GUEST\">GUEST</mat-button-toggle>\r\n</mat-button-toggle-group>\r\n\r\n<p>\r\n  Your current role: <code>{{currentRole | json}}</code>\r\n</p>\r\n\r\n<p>\r\n  Your current permissions: <code>{{currentPermissions | json}}</code>\r\n</p>\r\n","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from '@shared/shared.module';\r\nimport { PermissionsRoutingModule } from './permissions-routing.module';\r\nimport { PermissionsTestComponent } from './test/test.component';\r\nimport { PermissionsRouteGuardComponent } from './route-guard/route-guard.component';\r\nimport { PermissionsRoleSwitchingComponent } from './role-switching/role-switching.component';\r\n\r\nconst COMPONENTS = [\r\n  PermissionsTestComponent,\r\n  PermissionsRouteGuardComponent,\r\n  PermissionsRoleSwitchingComponent,\r\n];\r\nconst COMPONENTS_DYNAMIC = [];\r\n\r\n@NgModule({\r\n  imports: [SharedModule, PermissionsRoutingModule],\r\n  declarations: [...COMPONENTS, ...COMPONENTS_DYNAMIC],\r\n  entryComponents: COMPONENTS_DYNAMIC,\r\n})\r\nexport class PermissionsModule {}\r\n"],"sourceRoot":"webpack:///"}